
# 클라우드 컴퓨팅 기술2.

-------------------------------------------------------------------------------------

> ## 스토리지 기술 및 다중화.

### 스토리지 시스템의 요구사항.
- 단순 데이터 저장 및 접근을 지원하는 장치에서 새로운 기능을 갖춘 장치로 진화하고 있음.
  - 대용량 및 고속 데이터 처리.
  - 효율적인 데이터 공유.
    - 공유.
    - 분배(할당)
    - 보안 강화.
  - 확장성, 사용성, 유연성.
  - 다양한 접근 형식.

### 스토리지 논리적 접근 단위.
- 파일 : 데이터 스트름이 파일로 저장되어 폴더로 구조화되는 단위.
- 블록 : 스토리지 하드웨어에 가장 가까운 수준의 최소 데이터 단위.
- 데이터 세트 : 데이터가 테이블, 단락, 레코드와 같은 형식으로 구성된 단위.
- 오브젝트 : 데이터가 객체 단위로 구조화되는 스토리지로, 데이터 및 메타데이터로 구성된 오브젝트에 고유 ID를 부여.

### 스토리지 다중화.
- 단일 디스크로 처리할 수 없는 고용량 데이터를 처리하기 위해 디스크를 논리적으로 묶어 서버와 연결하여 사용하는 스토리지 구성 방식.
  - RAID Redundant Arrays of Independent Disks.
  - NAS Network Attached Storage.
  - SAN Storage Area Network.

### RAID.
- 다수의 디스크를 병렬적으로 구동하는 동시에 시스템의 신뢰성을 향상 시키는 기법.
- 표준 RAID 수준 (기법의 세부 기준들)
  - RAID 0 수준 : 스트라이핑.
  - RAID 1 수준 : 미러링.
  - RAID 0+1 수준 : 스트라이핑 + 미러링.
  - RAID 2 수준 : 스트라이핑과 에러의 검출 및 정정.
  - RAID 3 수준 : 전용 패리티에 의한 스트라이핑.
  - RAID 4 수준 : 전용 패리티에 의한 개량된 스트라이핑.
  - RAID 5 수준 : 삽인된 패리티로 개량된 스트라이핑.
- 패리티 기반 스트라이핑.
  - 에러의 검출 및 정정을 위한 별도의 패리티 디스크 유지.
  - 바이트 단위(RAID3) or 블록 단위(RAID4)

### RAID의 기능.
- 중복된 데이터의 분산 저장.
  - 중복 저장된 데이터를 기반으로 디스크 장애 발생 시 손실된 데이터 복구가 가능.
  - 미러링 : 쓰기 연산 발생 시 분산되어 있는 모든 물리 디스크에 기록.
- 성능 향상.
  - 읽기 요청이 다수의 디스크가 나누어 처리함으로써 읽기 속도를 향상. (병렬성 향상)

### NAS Network Attached Storage.
- 스위치를 통해 데이터를 송수신하는 저장장치.
  - 중계 역할을 하는 전용 파일 서버가 필요.
  - 전용 파일 서버에서 파일의 일관성 및 무결성을 유지하며 여러 서버에서 공유가 가능.
  - 대량의 I/O가 발생할 경우 지연율이 증가하여 DB와 같은 서비스에 부적합.

### SAN Storage Area Network. 
- 여러 종류의 데이터 저장 장치와 데이터를 사용할 서버를 파이버 채널을 사용하여 파이버 채널 스위치로 연결한 고속 데이터 네트워크.
  - 고속의 I/O 채널 제공.
  - 이기종 서버 환경 미지원. (여러가지 운영체제 사용 불가)

### 스토리지 가상화의 배경.
- RAID, NAS, SAN의 수백 수천개의 디스크를 관리하고 유지하는 데 많은 인력과 비용이 요구.
- 물리적 스토리지 시스템과 서버 사이에 스토리지 가상화 소프트웨어 층을 추가.
- 애플리케이션 구동 시 필요한 데이터의 위치에 대한 드라이브, 파티션, 스토리지를 인식하지 않아도 사용이 가능.
- 디바이스의 크기, 특징, 제조사 등 이 기종 디바이스의 특징들을 고려할 필요 없이 단일 스토리지 계층으로 그룹화하여 운용하여 유연한 구조를 가짐.

### 스토리지 가상화 구조.
- 여러 스토리지 디바이스를 단일 리소스로 인식하고 프로비저닝.
- 가용성 확보 및 무중단 서비스 가능.

### 스토리지 가상화의 장점.
- 스토리지 활용률 : 요구에 따라 디스크 단편화로 불용되는 스토리지의 공간을 최소화.
- I/O 성능 : RAID와 같은 복수의 스토리지 디바이스를 병렬적으로 동작 시킬 수 있음.
- 가용성 : 동일 데이터 미러링 복제하여 데이터 손실 방지, 무중단 디스크 교체가 가능.
- 관리 용이성 : 불필요한 스토리지 디바이스의 확장을 방지, 복수 개의 스토리지 디바이스를 하나의 가상화 스토리지로 통합 및 관리를 자동화.

### 스토리지 가상화 기술.
- 디스크 컨트롤러 가상화.
  - 스토리지 서브 시스템 또는 컨트롤러를 파티션으로 나누어 여러 개의 컨트롤러가 있는 것처럼 가상화.
- 네트워크 기반 스토리지 블록 가상화.
  - 서로 다른 스토리지 컨트롤러부터 유휴 디스크 공간을 모아 하나의 큰 디스크 풀을 만들어 제공하는 방식.
- 소프트웨어 정의 스토리지.
  - 하드웨어와 스토리지 소프트웨어를 분리하는 스토리지 아키텍처.
  - 하드웨어에 대한 소프트웨어의 종속성을 제거하여, 사용자가 필요에 따라 스토리지를 가변적으로 확장.

-------------------------------------------------------------------------------------

> ## 가용성 향상 기술.

### 가용성.
- 시스템을 계속하여 가동시킬 수 있는 능력.
- MS Azure의 경우 가산머신의 99.99% 가동률을 보장.
- 가용성을 향상 시키기 위해서 다중화 기술이 요구됨.

### 다중화.
- 장애 발생 시 즉시 예비 장비로 페일오버(Failover)하여 시스템이 연속적으로 기능 할 수 있도록 하는 기술.
- 다중화 대상 : 서버, 로드 밸런서, 네트워크 장치 등.

### 다중화의 구성.
- 핫 스탠바이 : 백업 장비 측이 가동 후 즉시 이용 가능한 구성.
- 웜 스탠바이 : 백업 장비 측이 가동 후 이용 가능한 상태가 되기까지 일정 부분 준비가 필요한 구성.
- 콜드 스탠바이 : 백업 장비 측을 정지시켜 두는 구성.

### 헬스 체크.
- 감시 대상인 H/W 혹은 S/W가 정상 상태에 있는지 일정 간격으로 어떤 응답 요청을 보내서 응답이 돌아오는지 정상 가동 판단 하는 기법.
  - Ping 프로토콜을 통해 신호 전달 여부 확인.
  - FTP 21포트, HTTP 80포트(HTTPS는 433포트) 응답 여부 확인.
  - 헬스체크 실패 시 관리자에게 보고.
  - Zookeeper 등의 엔드포인트 장비의 상태를 체크하는 전문 툴 사용.

### 로드 밸런싱.
- 클라이언트와 서버 사이에 위치하여 클라이언트로부터의 요청을 백엔드의 여러 서버로 트래픽을 분산하는 기술.

### 오토 스케일.
- CPU, 메모리, 네트워크 등 특정 IT 리소스의 임곗값을 지정하고 부하가 발생 시 서버의 수량을 늘리고 부하가 줄면 상황에 따라 서버를 회수하는 기술.















