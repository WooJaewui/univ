
 입출력시스템(3)



 # 입출력 제어의 개념.

입출력 제어.
데이터 처리에서 입출력은 반드시 필요하지만 중앙처리장치에 비해 많은 시간적 차이가 있다.
입출력장치는 자율적으로 동작하므로 중앙처리장치와 같이 동기화시켜 제어할 수도 없다.
입출력 동작시간은 매우 큰 비중을 차지하기 때문에 효율적으로 제어하는 것이 중요하다.

입출력 제어방식 종류.
중앙처리장치에 의한 제어방식.
DMA Direct Memory Access에 의한 제어방식.
채널에 의한 제어방식.



 # 입출력 제어방식 - 중앙처리에 의한 제어방식.

중앙처리에 의한 제어방식.
가장 간단한 입출력 시스템.
중앙처리장치가 입출력 제어기의 역할을 하기 때문에 간단한 입출력 제어기의 기능만을 포함.

프로그램에 의한 입출력.
중앙처리 장치와 입출력장치 사이에 입출력 인터페이스가 있는 기본 입출력시스템에 적용.
한 바이트를 입출력 하기 위해서는 입출력장치 인터페이스에 있는 D와 B 플래그를 이용한다.

프로그램에 의한 입출력 특징.
속도가 느리기 때문에 한 문자를 입력시키기 위하여 D 플래그 값이 1일 될때까지 중앙처리장치는 기다려야한다.
이러한 중앙처리장치의 기다림은 입출력 모두에서 나타난다.

인터럽트에 의한 입출력.
프로그램에 의한 입출력의 비효율성을 극복하는 입출력 방법.
프로그램에 의한 입출력의 비효율성은 D 플래그의 값이 1인가를 시험하는 조건부 분기에 기인한다.
이 조건부 분기 명령어를 제거할 수 있다면 효율성을 높일 수 있다라는 생각에서 생긴 방법이다.

인터럽트에 의한 입출력 특징.
프로그램에 의한 입출력에서는 중앙처리장치가 항상 상태 레지스터의 플래그를 모니터링 해야 한다.
인터럽트 처리에 의한 입출력에서는 입출력 동작에 동작에 관여하는 시점을 결정하는 것은 입출력 인터페이스이다.



 # 입출력 제어방식 - DMA 제어방식.

DMA Direct Memory Access.
중앙처리장치의 개입 없이 주기억장치에 직접 접근하여 입출력을 행하는 방식.

DMA 제어방식 설명.
인터럽트에 의한 입출력 방식은 프로그램에 의한 방식보다도 효율적.
인터럽트처리를 위한 중앙처리장치의 추가적인 작업이 필요하기 때문에 중앙처리장치의 많은 시간을 낭비한다.
이 문제점을 해결하기 위해 DMA 제어 방식이 고안되었다.

DMA 방식 처리 순서.
중앙처리장치가 DMA 제어기에서 입출력 명령어와 입출력 정보를 전송한다.
DMA 제어기가 중앙처리장치로 MCR 신호를 보낸다.
중앙처리장치가 DMA 제어기로 MCG 신호를 보낸다.
DMA 제어기가 주기억장치와의 입출력을 수행한다.
입출력할 데이터가 남아 있으면 2~4을 반복 수행.

DMA 제어기가 CPU로부터 전달 받는 정보.
DMA 제어기가 중앙처리장치의 개입 없이 입출력을 수행하기 위해 필요한 정보들.
읽기/쓰기를 수행할 주기억장치의 시작주소.
전송될 데이터 단어의 수.
읽기/쓰기 지정 신호. ( 전송모드 )
입출력을 수행할 장치 번호. ( 주소 )

DMA 방식의 데이터 전송방식.
DMA 대량 전송 방식. ( burst transfer )
싸이클 스틸 방식. ( cycle steal ) 

DMA 대량 전송 방식.
자기 디스크와 같은 고속의 장치를 입출력 장치로 사용할 때 이용되는 방식.
이 방식을 사용하기 위해 중앙처리장치는 DMA 제어기에게 정보를 알려주어야 된다.

사이클 스틸 방식.
DMA 제어기가 중앙처리장치로부터 주기억장치의 사이클을 뻇어서 사용한다는 의미이다.

DMA 제어기의 내부 구조.
제어 회로 : MCR 신호를 발생시켜 보내고, MCG 신호를 받으며, 입출력이 완료되면 INT 신호를 발생.
주소 레지스터 : 주기억장치에 접근하기 위해서 주기억장치의 접근 주소가 저장되는 레지스터.
데이터 레지스터 : 주기억장치 워드 저장 기능을 위하여 필요.
단어 계숙 레지스터 : 입출력이 시작될 때 입출력 할 단어의 수를 카운트하기 위해 필요.

DMA 제어 방식의 특징.
인터럽트에 의한 입출력 방식보다는 효율적이라고 할 수 있다.
중앙처리장치가 전송에 관여하지 않기 때문에 지능적이지 않다. ( 가상주소나 다양한 캐시 사용 불가 )



 # 입출력 제어방식 - 채널에 의한 제어방식.

채널에 의한 제어방식.
채널이라고 하는 일종의 입출력 프로세서를 이용하여 입출력 작업을 전담하도록 하는 방식.
입출력 장치와 주기억장치 사이의 데이터 전송을 위한 통로를 제공.
컴퓨터 시스템의 중앙처리장치와 유사하여, 전송 이외에 산술/논리/분기 등의 연산 작업도 수행가능.
일을 수행하기 시작하면 중앙처리장치와는 독립적으로 동작한다.
중앙처리장치의 이용 효율을 증가시킬 수 있으나, 하드웨어적인 비용이 증가한다는 단점이 있다.

채널 프로그램 channel program.
채널 입출력을 위해 수행하는 프로그램.
주기억장치 기억된 채널 프로그램 시작주소를 채널에게 전달하면 채널에 의한 입출력이 수행.

기억장치에서 채널 프로그램의 구조.
채널 명령어들은 linked list형식으로 구성되어있다.
채널 주소어 CAW  : 주기억장치 내의 채널 프로그램이 시작하는 곳의 주소.
채널 상태어 CSW : 채널에 의해 수행되는 여러 가지 입출력 상황에 대한 결과를 저장.

선택기 채널.
한 입출력 장치의 전용인 것처럼 운영되는 채널을 선택기 채널이라고 한다.
일반적으로 고속의 입출력장치와 입출력을 하기 위하여 사용된다.
어느 입출력장치와 주기억장치가 접속되면 접속이 차단될 때까지 다른 입출력 장치는 입출력할 수 없다.

멀티플렉서 채널.
채널을 시분할 공유하여 입출력하도록 연결한 채널을 멀티플렉서 채널이라고 한다.
각 장치마다 서브 채널 제어기를 갖도록 구성한다.









