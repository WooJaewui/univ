
 입출력시스템(2)



 # 입출력 버스.

컴퓨터 시스템의 버스.
중앙처리장치, 주기억장치, 입출력장치, 네트워크로 연결된 컴퓨터들 사이에 정보가 교환되는 회선을 의미.
버스에 연결된 장치는 주 장치와 종 장치로 구분.
주 장치 : 데이터 전달회선의 사용권을 획득하고 실제로 전송에 필요한 제어를 하는 장치.
종 장치 : 주장치의 요구에 따른 데이터 전달에 필요한 작업을 하는 장치.

버스를 이용한 정보전달 방법.
직렬전송, 병렬전송.
입출력장치와의 데이터 전달은 주로 직렬전송 방식을 사용.

버스회선의 구성.
제어회선 : 주장치와 종장치 사이의 R, W의 제어신호와 상태정보를 보내는 데 사용된다. ( 양방향 )
주소회선 : 주장치가 버스에 연결시키고자 하는 종장치의 주소를 보내는 데에만 이용. ( 단방향 )
데이터 회선 : 주장치와 종장치사이의 데이터 전달. ( 양방향 )

컴퓨터 시스템의 버스 종류.
중앙처리장치 내부버스 : ALU와 레지스터간의 데이터 이동을 위한 버스.
주기억장치 버스 : 중앙처리장치와 주기억장치 사이의 버스. 
입출력 버스 : 입출력에만 이용되는 버스.

입출력 버스 회선의 종류.
입출력 데이터 버스 : 입출력될 데이터가 이동되는 버스.
입출력 주소 버스 : 입출력을 하고자 하는 장치를 선택하게 하는 버스.
입출력 제어 버스 : 입출력 개시신호를 입출력 장치에 보내는 버스.

입출력 버스의 연결.
한 쪽에는 입출력장치 인터페이스가 연결되어 있으며, 다른 쪽에는 입출력 제어기가 연결되어 있다.
주기억장치와 입출력장치를 연결.
주기억장치 버스와 입출력 버스를 연결하기 위해 입출력 제어기를 사용한다.

입출력 버스의 연결형태 - 독립 입출력 버스.
주기억장치 버스와 입출력 버스를 구분하여 사용하는 형태.

입출력 버스의 연결형태 - 입출력 공용버스.
주기억장치 버스와 입출력 버스를 구분하지 않고, 주기억장치 버스를 입출력 버스로도 사용하는 형태.

입출력 버스의 중재.
만일 여러 장치들이 동시에 버스사용을 요청하는 경우 경쟁이 발생. ( 버스경합 - bus contention )
이러한 경우 어떤 기준에 따라 순서대로 버스를 사용하게 해주는 기능이 필요. ( 버스중재 - bus arbitration )

버스 중재기 bus arbiter.
버스를 사용하려면 우선 중재기에 버스 사용을 요청해야 되며, 요청이 승인되어야만 사용할 수 있다.

버스 사용 순서.
버스 요청 BR Bus Request : 어떤 장치가 버스를 사용하기 위해 중재기에 요청하는 것.
버스 허용 BG Bus Grant : 중재기가 요청을 보낸 장치에 사용을 허락하는 것.
버스 사용중 BB Bus Busy : 버스 허용 신호를 받은 장치가 버스를 사용하면서 중재기에 보내는 신호.



 # 입출력 버스의 중재 방법.

중앙 집중식 병렬 중재.
한 버스에 하나의 중재기를 사용하는 방식.
모든 장치들은 독립된 버스 요청과 버스 허용 회선에 의하여 중재기에 연결.
중재기 내에 장치들의 우선순위를 정하는 논리회로가 있어야한다.

데이지 체인 버스 중재.
버스 요청이 발생하면 버스 중재기에 제일 가까운 곳에 있는 장치에 버스 허용 신호를 보낸다.
그 장치가 버스 요청을 하지 않았을 경우에 다음으로 가까운 장치에 보내지는 방법을 사용한다.
외부에 있는 데이지 체인 하드웨어에 의하여 결정된다. 

폴링에 의한 버스 중재.
하나의 폴링 회선이 중재기에서부터 각 장치들에 공통되게 연결.
버스요청을 인삭하면 어느 장치가 요청했는가를 파악하기 위하여 폴링선을 이용하여 폴링계수를 한다.
각 장치의 우선순위를 임의로 변경시킬 수 있는 장점이 있다.
각 장치마다 순차적으로 이루어지기 때문에 버스 사용권을 부여 받는 절차가 길어지는 단점이 있다.



 # 입출력 데이터 전송.

데이터 전송 방식.
버스에 연결된 서로 다른 특성을 가지는 장치들 사이의 공통적인 전송 규칙.

동기식 전송.
서로 독립적인 두 개의 장치가 같은 클럭신호에 따라 데이터의 전송.
이 경우 두 개의 장치는 '동기화 되어 있다' 라고 한다.

비동기식 전송.
대부분의 장치는 각각 독립된 클럭을 가지고 데이터를 전송.
이러한 것을 '비동기화 되어 있다' 라고 한다.
입출력장치는 자율적으로 동작하므로 비동기식 방식이다.

비동기적인 장치 사이에서의 데이터 전송.
데이터를 일방적으로 전송하면 수신측에서 데이터가 수신되지 않을 경우에도 수신된 것으로 착각.
그러므로 제어선을 사용하여 상대편에게 신호를 보내주어 준비를 하도록 해야 한다.
두 장치간의 데이터 전송을 하려면 데이터의 전송되는 시점을 알리 위한 제어 신호가 교환되어야 한다.



 # 스트로브 제어방식.

스트로브 제어방식.
스트로브 신호 : 데이터를 전송할 때 실제로 전송되는 것을 알려주기 위해 보내주는 신호.
데이터 전송회선 이외에 스트로브 신호를 보내주기 위한 하나의 제어회선을 더 갖는 방식.

스트로브 제어방식. ( 송신 -> 수신 )
송신측에서 데이터 버스에 데이터를 올려놓은 다음, 스트로브 신호를 통해 알린다.
수신측에서는 스트로브 신호를 확인하고 데이터를 수신한다.

스트로브 제어방식. ( 수신 -> 송신 )
수신측에서 송신측으로 데이터 전송을 요구하는 스트로브 신호를 보내서 데이터 전송이 이루어짐.
상대방이 스트로브 신호를 확인했는지 확인할 수 없다.



 # 핸드셰이킹 제어방식.

핸드셰이킹 제어방식.
스트로브 신호 방식의 단점을 보완해 줄 수 있는 방식.
높은 신뢰성과 융통성을 갖는다.
송신측과 수신측 양쪽에서 상대편에게 제어신호를 보내주는 방법. ( 2개의 신호선 )

핸드셰이킹 제어방식 특징.
송신잦ㅇ치와 수신장치가 동시에 동작해야 한다.
어느 한 쪽의 장치가 잘못되면 데이터의 전송이 이루어지지 않기 때문에 높은 신뢰성을 갖는다.
일정한 시간 동안 기다려서 전송이 이루어지지 않으면 에러로 인정하여 에러를 검사하도록 한다.
하나의 송신장치에서 여러 개의 수신자치로 데이터를 전송할 수도 있다.



 # 비동기 직렬 전송.

두 장치간 데이터 전송.
병렬 전송 : 속도가 빨라 단거리, 고속전송에 사용된다.
직렬 전송 : 속도가 느리나 비용이 저렴하다.

데이터의 직렬 전송.
동기적 전송, 비동기적 전송.

동기 직렬 전송.
두 장치가 공통의 클럭 주기를 갖는다.
각 비트는 클럭 펄스에 의한 속도로 계속 전송.
장거리 직렬 전송 시 각 장치는 같은 주기를 가진 각각의 클럭을 가진다.
각 장치 사이의 시간적인 보조를 맞추기 위해 동기 신호가 주기적으로 전송.

비동기 직렬 전송.
데이터를 문자 단위로 전송할 때 시작 비트와 정지 비트를 삽입.
각 문자는 시작 비트, 데이터 비트, 정지 비트 세 부분으로 구성되어 전송.

비동기 직렬 전송시 문자 검출 원리.
데이터가 전송되지 않을 때 회선은 1의 값을 유지한다.
문자 전송의 시작은 시작 비트에 의해 알 수 있으며, 이는 항상 0의 값을 갖는다.
문자는 시작 비트 뒤에 온다.
마지막 문자가 전송이 된 후에 정비 비트는 회선을 최소한 1비트 이상 1의 값으로 유지시킴으로써 알아 낸다.






