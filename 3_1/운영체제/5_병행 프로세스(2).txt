
 병행 프로세스(2)



 # 프로세스의 상호협력.

병행 프로세스들의 상호협력.
공통작업을 수행하기 위해 서로 협동하는 경우.

생상자/소비자 문제.
생산자
	- 버퍼에 데이터를 채우는 프로세스.
	- 버퍼가 가득 차 있다면 생상자는 대기해야 함.
소비자 
	- 버퍼에 있는 데이터를 읽어 내는 프로세스.
	- 버퍼가 비어 있다면 소비자는 대기해야 함.
상호배제 , 동기화 필요.
	- 세마포어를 활용하자.

생상자/소비자 문제 - 세마포어 사용.
mutex. empty, full 등 상황에 따라 다양한 세마포어를 사용한다.
P(mutex), V(mutex)를 사용해서 상호배제를 해결한다.
P(full), V(full), P(empty) ,V(empty)를 통해 동기화를 해결한다.

판독기/기록기 문제.
여러 개의 판독기가 동시에 공유 데이터 객체에 접근하는 것은 문제 없음.
기록기가 다른 기록기 또는 판독기와 동시에 공유 데이터 객체에 접근하는 것은 문제.
상호배제 필요.

판독기/기록기 문제 - 우선순위에 따른 문제의 변형.
판독기 우선.
	- 기록기가 이미 공유객체의 사용을 허가 받은 것이 아니라면 판독기는 대기하지 않음.
	- 기록기의 기아상태 유발 가능.
	- mutex, wrt 세마포어와 readCount 변수를 통해 구현.
기록기 우선.
	- 일단 기록기가 준비되었다면 기록을 가능한 한 빨리 수행할 수 있도록 함.
	- 판독기의 기아상태 유발 가능.
	- mutex, wrt 세마포어와 writeCount 변수를 통해 구현.



 # 프로세스 간의 통신.

프로세스 간의 통신 IPC InterProcess Communication.
병행 프로세스 사이의 통신을 위한 방법.
	- 공유기억장치 기법.
	- 메시지 시스템 기법.
	- 두 방법은 상호 배타적이 아님. ( 단일 운영체제 내에서 동시에 사용 가능 )

공유기억장치 기법.
프로세스 간에 공유변수를 이용하여 정보를 교환.
고속 통신 가능.
통신기능 제공의 책임은 응용 프로그래머. ( 커널이 관여하지 않음 )

메시지 시스템 기법.
메시지 교환방식으로 정보를 교환.
send / receive 연산자. ( 시스템 연산자 )
소량의 데이터 교환에 유용.
통신기능 제공의 책임은 운영체제. ( 커널이 관여한다 )
통신 링크 : 프로세스들 사이에 메시지를 주고받기 위한 연결통로.

메시지 시스템 기법 - 직접 통신.
메시지 전달 연산에 수신자나 송신자 이름을 명시.
	- 통신 링크는 자동 설정됨.
	- 하나의 링크는 두 프로세스 사이만 연관되며, 프로세스 사이에 하나의 링크가 존재.
	- 링크는 양방향임.
대칭형.
	- send, receive 둘 다 직접적으로 수신자, 송신자 이름을 명시.
비대칭형.
	- send는 수신자를 명시하고, receive는 변수를 사용해서 명시. ( 유연성이 있다 )

메시지 시스템 기법 - 간접 통신.
메시지 전달 연산에 우편함 이름을 명시.
	- 통신 링크는 공유 우편함이 있는 경우에만 설정됨.
	- 하나의 링크는 2개 이상의 프로세스들과 연관될 수 있으며 여러 링크 존재 가능.
	- 링크는 단방향 또는 양방향임.
우편함이 프로세스에 소속되는 경우.
	- 우편함을 소유한 프로세스는 수신만 가능, 다른 프로세스는 송신만 가능.
우편함이 운영체제에 소속되는 경우.
	- 양방향 송/수신 가능.

링크의 용량.
'0' 용량.
	- 버퍼가 따로 존재하지 않는 경우.
	- 데이터를 보내면 수신 프로세스는 바로 데이터를 받아야 된다. ( 동기화 필요 )
제한된 용량.
	- 일정한 크기의 버퍼가 존재하는 경우.
	- 큐가 가득 차면 송신자는 대기.
무제한 용량.
	- 버퍼의 크기가 무제한인 경우.
	- 송신자는 대기할 필요가 없음.
'0' 용량이 아닌 경우 메시지 도착 여부의 인지 방법.
	- 메시지를 받은 프로세스에서 메시지를 받았다는 메시지를 보낸다. ( 비동기적 통신 )

예외조건 처리.
프로세스가 종료된 경우.
	- 송신 프로세스가 종료된 경우.
		- 운영체제가 수신 프로세스 종료.
		- 운영체제가 송신 프로세스가 종료된 사실을 수신 프로세스에게 알림.
	- 수신 프로세스가 종료되면 
		- 운영체제가 송신 프로세스 종료.
		- 운영체제가 수신 프로세스가 종료된 사실을 송신 프로세스에게 알림.
메시지를 상실한 경우.
	- 운영체제가 탐지 후 메시지 재전송.
	- 송신 프로세스가 탐지 후 메시지 재전송.
	- 운영체제가 탐지 후 송신 프로세스에게 통신.
	- 일정 시간을 정해둔 후 메시지가 전송되지 않으면 탐지한다.
메시지가 혼합된 경우.
	- 오류 탐지 후 재전송.
	- checksum같은 알고리즘을 통해 오류 탐지.





